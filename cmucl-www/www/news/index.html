@@DTD@@
<html>
<head>
<title>CMUCL News</title>
@@METAS@@
</head>

<body bgColor="#FFFFFF" text="#000000">

@@HEADING()

<p>
<dl>
<dt><p><strong>20b released</strong></p></dt>
<dd><p>CMUCL 20b has been released.  For information on the changes,
  we refer the reader to the <a href="release-20b.txt">20b release
  notes</a>. 
</dd>
      
<dt>2010-09 snapshot and 20b prerelease 2</dt>
<dd><p>
 CMUCL 20b prelease 2 has been released, in preparation for the
 upcoming 20b release.  Therefore there will not
 be a 2010-09 snapshot.
 <ul>
  <li> It is possible to hash NaNs (IEEE Not-a-Number)
  </li>
  <li> For SSE2 builds, = no longer signals an error if one operand is
  NaN.  This matches what happens for x87.
  </li>
  <li> For SSE2 builds, <code>SIGCONTEXT-FLOAT-REGISTER</code> returned the wrong
  value for single-floats.  Easily noticead when tracing a function
  with single-float arguments. 
  </li>
  <li> Trac issue #36: file-position broken for utf16 and utf32. 
       <code>FILE-POSITION</code> returns the correct value for UTF16
       and UTF32 when there is a BOM (byte-order mark) at the
       beginning of the file.
  </li>
 </ul>
</dd>

<dt>2010-08 snapshot and 20b prerelease 1</dt>
<dd><p>
 CMUCL 20b prelease 1 has been released, in preparation for the
 upcoming 20b release.  Therefore there will not
 be a 2010-08 snapshot.
 <ul>
  <li> <p>Error handling has been added to external formats.  Previously,
      all external formats would silently replace bad encodings with a
      suitable replacement character.  Now, the user can specify how
      the errors are handled by using the <tt>:DECODING-ERROR</tt> and
      <tt>:ENCODING-ERROR</tt> parameters to <tt>OPEN</tt>.  The default is the previous
      behavior.</p>
	    
      <p>For decoding-error, a character, symbol, or function
      can be given.  If a character, then that character is used as
      the replacement character.  For a symbol or function, it must be
      a function of 3 arguments:  a message string, the offending
      octet (or nil), and the number of octets read in the encoding.
      If the function returns, it must be the codepoint of the desired
      replacement.</p>

      <p>For encoding-error, a character, symbol, or function can be
      given.  If a character, then that character is used as the
      replacement character.  For a symbol or function, it must be a
      function of 2 arguments: a message string and the offending
      codepoint.  If the function returns, it must be the codepoint of
      the desired replacement.</p>
    </li>
    <li> Add <tt>EXT:LIST-ALL-EXTERNAL-FORMATS</tt> to list all known external
      formats and their aliases.
    </li>
    <li> ADD <tt>EXT:DESCRIBE-EXTERNAL-FORMAT</tt> to print a description of the
      specified exernal format.  To support this, the macros
      <tt>DEFINE-EXTERNAL-FORMAT</tt> and <tt>DEFINE-COMPOSING-EXTERNAL-FORMAT</tt> have
      changed.
    </li>
    <li> The sparc port now supports the :executable feature.</li>
    <li> The Mac OS X port now support the :executable feature.</li>
    <li> A critical bug in the fast unicode stream buffering routine has
      been fixed.  This bug manifests itself by causing valid
      sequences to be incorrectly decoded, resulting in a replacement
      character.
    <li> UTF-8 correctly catches overlong sequences now.  Previously,
      overlong sequences were missed.
    <li> When UTF-8 decoder encounters an overlong sequence, a surrogate
      code point, or a too-large codepoint, the entire sequence is
      converted to the replacement character.  Previously, all of the
      octets except the first were put back, and the data read again.
    <li> Some GC improvements for sparc and ppc.  (Changes for ppc
      untested).  GC could incorrectly move the PC and other
      registers, causing a segfault.
    <li> A bug inadvertently introduced in the 2010-04 non-unicode
      snapshot has been fixed.  The bug prevented the non-unicode
      versions of CMUCL from loading the external format aliases
      file. 
    <li> With SSE2, the imaginary part of a (complex single-float) is now
      returned correctly.
    <li> The method used to create executable images for Linux has been
      cleaned up and should be far more robust against different
      versions of the OS.  The same is true on sparc as well as Mac OS
      X.
 </ul>
</dd>

<dt>2010-07 snapshot</dt>
<dd><p>
 <ul>
  <li> DELETE-FILE, ENSURE-DIRECTORIES-EXIST, FILE-AUTHOR,
  FILE-WRITE-DATE, and OPEN now merge the given pathname with
  *DEFAULT-PATHNAME-DEFAULTS* as required by CLHS sec 19.2.3. 
  </li>
  <li> When printing out argument values in the debugger and also
  during TRACE, the incorrect values were returned for the SSE2 core.
  This was caused by using the x87 values instead of the sse2 values
  in the sigcontext.  This is fixed now. </li>
 </ul>
</dd>

<dt>2010-06 snapshot</dt>
<dd><p>
 <ul>
  <li> ASDF2 and MK-DEFSYS have been added as contrib modules.  Use
  <code>(require :asdf)</code> or <code>(require :defsystem)</code> to
  load these.
  </li>
  <li> A new switch, <code>-help</code> has been added.  This prints
  out a brief summary of the available command line switches and
  exists.  You may also use <code>--help</code>.
  <li> The GCD of positive integers sometimes returned a negative
  result.  This is fixed.
  </li>
 </ul>
</dd>

<dt>2010-05 snapshot</dt>
<dd><p>
 <ul>
  <li> Source information (file) for defstructs and deftypes is now
  provided.  <tt>DESCRIBE</tt> will print out the name of the file
  where the defstruct/deftype was defined. 
  </li> 
  <li> <tt>WITH-STANDARD-IO-SYNTAX</tt> uses the standard pprint dispatch table
    now instead of the current table.
  </li>
  <li> <tt>PRINC-TO-STRING</tt> binds <tt>*PRINT-READABLY*</tt> to <tt>NIL</tt> as required.
    Previously, it used the current value of
    <tt>*PRINT-READABLY*</tt>.
  </li>
  <li> <tt>DEFCLASS</tt> signals an error if the class name already names a
    <tt>DECLARATION</tt>. 
  </li>
  <li> The <tt>:METHOD-CLASS</tt> argument to <tt>ENSURE-GENERIC-FUNCTION</tt> can be a
    class object as well as a name.
  </li>
  <li> Recognize but ignore the <tt>:DECLARE</tt> argument to
    <tt>ENSURE-GENERIC-FUNCTION</tt>. 
  </li>
  <li> Default documentation for short form of
  <tt>DEFINE-METHOD-COMBINATION</tt> is <tt>NIL</tt>, not "". 
  </li>
  <li> <tt>MAC</tt> is an alias for the <tt>CR</tt> composing external
  format.
  </li>
  <li> <a href="http://trac.common-lisp.net/cmucl/ticket/39">Trac #39: non-standard-lexical syntax</a> is fixed.
  The reader macros are no longer installed by default.  Use
  <tt>(intl:install)</tt> to install them.

 </ul>
</dd>

<dt>2010-04 snapshot</dt>
<dd><p>
 <ul>
  <li> Support for internalization/localization added.  Messages from
      CMUCL can be translated, but currently only a few messages in
      Korean are translated.  For fun, there is a full Pig Latin
      translation (done by machine).  </li>
  <li> <tt>COMPILE</tt> will update the macro-function if the specified names a
      macro.  (Previously, the fdefinition of the name was set.)</li>
  <li> CMUCL now signals a cerror when attempting to redefine a slot
      accessor via <tt>DEFUN</tt> or <tt>COMPILE</tt>.  If continued, the accessor is
      redefined, and CMUCL assumes the new definition is usable as a
      slot accessor.  Previously, CMUCL would print a warning and
      undefine the structure.</li>
  <li> An issue with SSE2 and GC hooks has been fixed.  This shows up
      when doing arithmetic with GC hooks that use the SSE registers.
      The SSE state is saved along with the x87 state.</li>
 </ul>
</dd>

<dt>2010-03 snapshot</dt>
<dd><p>
  <ul>
   <li> <tt>FROUND</tt> is much faster for single and double float numbers.
   This is available everywhere, except for x87 (due to potential
   roundoff errors.) </li>
   <li> CMUCL no longer segfaults on Linux when running on a kernel
      without COMPAT_BRK.  CMUCL will set the personality
      appropriately and re-exec itself.</li>
   <li> <tt>GET-MACRO-CHARACTER</tt> would return the wrong second value because
      <tt>*READTABLE*</tt> was always being used instead of the specified
      readtable. </li>
   <li> <tt>COMPILE-FILE</tt> was generating an error when compiling <tt>COMPILE</tt>
      forms.  This is fixed.</li>
   <li> A critical bug in SSE2 support has been fixed.  Multiplying a
      complex single-float by a single-float produced the wrong
      result. </li>
   <li> Fix issue where CMUCL does not correctly handle <tt>FLET</tt>s in
      <tt>DEFMETHOD</tt> bodies which use the same name as that of the generic
      function.   The generic function was called instead of the local
      function.</li>
   <li> CMUCL would fail to compile external formats if <tt>*READTABLE*</tt> was
      not the standard readtable.  This is fixed by binding
      <tt>*READTABLE*</tt> to the standard readtable before compiling the
      external format.</li>
   <li> The debugger help messages is updated to reflect the actual
      implementation.  In particular <tt>L</tt> and <tt>PP</tt> have been updated, and help
      for the <tt>DESCRIBE</tt> command has been added</li>
  </ul>
</dd>

<dt>2010-02</dt>
<dd><p>
  <ul>
   <li>Some issues with <tt>FILE-POSITION</tt> on unicode builds have been
   fixed.  However, <tt>FILE-POSITION</tt> is still incorrect for files using
   external formats that have a byte-order mark.</li>
   <li>The error-output and trace-file files are now opened using the
   same external format as specified in <tt>COMPILE-FILE</tt>.  This ensures
   that these output files can correctly represent the same characters
   as used for the input file.</li>
   <li>The debugger now opens files using the same external format as
   used to compile them.  Previously, the default format was used,
   which would be wrong if the file is in a different format.  This
   resulted in the debugger being unable to find the source
   forms. </li>
   <li><tt>TRANSLATE-PATHNAMES</tt> now creates the resulting path to be an
   absolute or relative path according to whether the TO  pathname
   is abslute or relative.  Previously, the result was take from
   the SOURCE pathname, except if TO were absolute, in which case
   the result was absolute.</li>
  </ul>
</dd>
<dt>2010-01-04</dt>
<dd><p>Experimental support for static arrays has been added.  These
are allocated in foreign (malloc) space and are never moved by GC.
They are, however, properly garbage collected.  To create an array,
use <tt>MAKE-ARRAY</tt> with <tt>:ALLOCATION</tt> <tt>:MALLOC</tt>.  Only arrays of character; 8,
16, and 32-bit integers (signed or unsigned); single and double
floats; and complex single and double floats are supported.
</dd>
</dl>

<p> Also see older news:

<ul>
<li> <a href = "2009.html">news items from 2009</a>
<li> <a href = "2008.html">news items from 2008</a>
<li> <a href = "2007.html">news items from 2007</a>
<li> <a href = "2006.html">news items from 2006</a>
<li> <a href = "2005.html">news items from 2005</a>
<li> <a href = "2004.html">news items from 2004</a>
<li> <a href = "2003.html">news items from 2003</a>
<li> <a href = "2002.html">news items from 2002</a>
<li> <a href = "2001.html">news items from 2001</a>
</ul>

@@FOOTER@@
</body>
</html> 
