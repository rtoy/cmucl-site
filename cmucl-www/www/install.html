@@DTD@@
<html>
<head>
<title>Installing CMUCL</title>
@@METAS@@
</head>

<body bgColor="#FFFFFF" text="#000000">

@@HEADING(installing CMUCL)

<p> This page explains how to install the release tarballs of CMUCL. If
    you're using an alternative distribution packaging, such as
    <tt>.deb</tt> archives, use whatever is appropriate there.  We use
    the 19e release as an example, but the same idea can be used for
    any release tarball or snapshot for CMUCL.</p>

<p> For each <a href = "platforms.html">supported platform</a> there are
    two bzip2 tar archives, one containing the base system, and the other
    (with <tt>extra</tt> in the name) containing optional additional files
    supporting CLX, Hemlock, the Motif interface, and so on. Note also
    that there may also be Unicode and non-Unicode (8-bit characters)
    tarballs.  The non-Unicode tarball has <tt>non-unicode</tt> in the
    file name.  The same method can be used to install either of these.

<p> <a href = "download.html">Download the archives</a> corresponding to
    your platform. Certain tarballs are PGP-signed by the packager and are
    accompanied by a file with an <tt>.asc</tt> extension; in this case you
    can check that they have not been modified by using GPG:

<pre>
    wget http://common-lisp.net/project/cmucl/downloads/release/19e/cmucl-19e-x86-linux.tar.bz2
    wget http://common-lisp.net/project/cmucl/downloads/release/19e/cmucl-19e-x86-linux.tar.bz2.asc
    gpg --verify cmucl-19e-x86-linux.tar.bz2.asc
</pre>

<p> GPG should tell you that the file has a good signature from one of the
    CMUCL developers (you may need to fetch the developer's key with
    <tt>gpg --recv-key</tt>). Unless you have a web-of-trust relationship
    with that developer it will warn you that the key is not certified with
    a trusted signature.


<h2> Extract the tarballs</h2>

<p> The release tarballs extract to the following directory structure:

<pre>
     bin/lisp
     lib/cmucl/lib/lisp.core
     doc/cmucl/README (this file)
     man/man1/cmucl.1
     ...
</pre>  

<p>  This allows you to install CMUCL directly under <tt>/usr/local</tt>, for
     example using
  
<pre>
     cd /usr/local
     tar xjf /path/to/cmucl-19e-&lt;platform&gt;.tar.bz2
     tar xjf /path/to/cmucl-19e-&lt;platform&gt;.extra.tar.bz2
</pre>

<p> If you do not have a version of \code{tar} that understand the \code{j} option,
you may need to replace the \code{tar} command above with
</p>

<pre>
     bunzip2 < /path/to/cmucl-19e-<platform>.tar.bz2 | tar xf -
</pre>

<p> or alternatively, install under a directory in <tt>/opt</tt>, for example
  
<pre>
     mkdir /opt/cmucl-19e
     cd /opt/cmucl-19e
     tar xjf /path/to/cmucl-19e-&lt;platform&gt;.tar.bz2
     tar xjf /path/to/cmucl-19e-&lt;platform&gt;.extra.tar.bz2
</pre> 
 
<p> The 19e distribution is relocateable: the lisp binary will search for
    the lisp.core file relative to its location. This means that it is
    sufficient to have <tt>/usr/local/bin</tt> (or
    <tt>/opt/cmucl-19e/bin</tt>) in your <tt>PATH</tt> to be able to invoke
    CMUCL from your shell.

<p> You can now invoke CMUCL: this should display a banner then show a
    prompt (the default prompt is an asterisk).

<pre>
      % lisp
      CMU Common Lisp 19e (19E), running on mansuetude
      With core: /opt/cmucl-19e/lib/cmucl/lib/lisp.core
      Dumped on: Thu, 2008-05-01 18:56:07+02:00 on usrtc3142
      See &lt;http://www.cons.org/cmucl/&gt; for support information.
      Loaded subsystems:
          Python 1.1, target Intel x86
          CLOS based on Gerd's PCL 2004/04/14 03:32:47
      * (format t &quot;~&amp;Hello, world!~%&quot;)
      Hello, world!
      NIL
      *
</pre>


<h2>Loading subsystems</h2>

<p> To load precompiled subsystems (assuming that you installed the -extra-
    tarball), just use <tt>REQUIRE</tt>:

<pre>
     * (require :gray-streams)
     * (require :clx)
     * (require :clm)
     * (require :hemlock)
</pre>

<p> Starting with the 2010-06 snapshot, ASDF2 and MK-DEFSYSTEM are
included with CMUCL.  There you can load them using
<pre>
     * (require :asdf)      ; Load asdf2
     * (require :defsystem) : Load mk-defsystem
</pre>
</p>


<h2>Create a site-wide initialization file</h2>

<p> CMUCL reads two initialization files: a per-user file named
    <tt>~/.cmucl-init.lisp</tt>, or a site-wide file named
    <tt>$ROOT/lib/cmucl/lib/site-init.lisp</tt> (where <tt>$ROOT</tt> is
    the base directory in which you installed CMUCL, for example
    <tt>/usr/local/</tt>). It is customary to initialize the <tt
    class="function-name">SHORT-SITE-NAME</tt> and <tt
    class="function-name">LONG-SITE-NAME</tt> from the site-init file.

<p> CMUCL is distributed with a file called
    <tt>$ROOT/lib/cmucl/lib/generic-site.lisp</tt> that you can use as a
    template for your site-init file:

<pre>
   # cd $ROOT/lib/cmucl/lib
   # cp generic-site.lisp site-init.lisp
   # emacs site-init.lisp
</pre>

<p> If you have the CMUCL source code installed on your system, you can set
    the <tt>target:</tt> search-list to point to them, so that the debugger
    provides more information when a CMUCL function signals an error. See
    the commented-out line at the end of the generic-site file. 



<h2>Interacting with CMUCL</h2>
 
<p> The basic commandline interface offered by CMUCL is rather basic; it
    doesn't offer a history mechanism or commandline editing facilities.
    You may wish to investigate using a more powerful interface than the
    commandline, such as <a href = "http://common-lisp.net/project/slime/">
    SLIME</a>, or <a href =
    "http://common-lisp.net/project/climacs/">Climacs</a>, or <a href =
    "hemlock/">Hemlock</a>, or (more basic) <tt>M-x run-lisp</tt> in Emacs.
    </p>

<h2>Patching CMUCL</h2>
<p>On occasion, patches for CMUCL releases are created for critical
issues found after the release.  These are normally fixed by the next
snapshot, but in case it is not desirable to use the snapshot, patches
are created.  The patches are in the <code>patches</code> subdirectory
of the release directory.  

These patches are tarballs containing an asd file and the necessary
files to implement the patch.  To apply a patch, you need to have <a
href="http://www.cliki.net/asdf">asdf</a> available.  (Note that 20b
now includes asdf2.)  Untar the patch somewhere where asdf will be
able to find it.  Then simply use
<pre>
(require :cmucl-xxx-patch-nnn)
</pre>
where <emph>xx</emph> is the the release version of cmucl (such as
19a) and <emph>nnn</emph> is the patch number.
This works if your version of asdf has the hooks needed for this.
Otherwise, you can do
<pre>
(load "patch-nnn.asd")
(asdf:oos 'asdf:load-op :cmucl-xx-patch-nnn)
</pre>

@@FOOTER@@
</body>
</html>
